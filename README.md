# Продвинутая логика бота для игры "Камень-Ножницы-Бумага"

Данный бот использует многоуровневую стратегию для выбора ходов, опираясь на анализ поведения противника. Стратегия включает применение Марковских цепей, обнаружение паттернов в истории ходов и комбинированный режим для повышения точности предсказаний.

# README

## Описание
Данный проект реализует алгоритм бота для игры «Камень-Ножницы-Бумага» (далее – КНБ).  
Алгоритм поддерживает:
1. **Распознавание детерминированной стратегии** соперника путём анализа последовательностей предыдущих ходов (порождающий автомат).  
2. **Запасной выбор** на основе «Китайской стратегии», которая, в зависимости от результата предыдущего раунда (выигрыш/ничья или проигрыш) и признака детерминированности поведения соперника, меняет ход.

## Особенности
- **Проверка детерминированности**:  
  Бот анализирует массив предыдущих ходов соперника (МПХС), пытаясь найти повторяющуюся последовательность (длиной до 3), за которой всегда следует один и тот же ход. При успешном обнаружении бот предсказывает следующий ход соперника и выбирает контрход, побеждающий предсказанный.
- **Китайская стратегия**:  
  Если детерминированное правило не найдено, бот опирается на исход предыдущего раунда.  
  - При **выигрыше** (или **ничьей**, трактуемой как выигрыш) применяется «Правило A»:  
    - Камень → Ножницы  
    - Ножницы → Бумага  
    - Бумага → Камень  
  - При **проигрыше** и обнаруженном детерминированном поведении соперника (**ОКМ = True**) применяется «Правило B»:  
    - Камень → Бумага  
    - Ножницы → Камень  
    - Бумага → Ножницы  
  - Если поведение соперника не признано детерминированным, используется «Правило A» (как при выигрыше).

## Структура кода
- **`set_parameters(...)`**  
  Инициализирует глобальные переменные и сбрасывает состояние перед началом игры.
- **`on_game_start()`**  
  Обнуляет историю и другие флаги непосредственно перед игрой.
- **`choose(previous_opponent_choice)`**  
  Основная функция принятия решения.  
  1. Добавляет ход соперника в МПХС (если он не равен 0).  
  2. Пытается обнаружить детерминированное правило.  
  3. Если удалось предсказать ход соперника – выбирает контрход.  
  4. Иначе использует запасной алгоритм (Китайская стратегия).  
- **`on_game_end()`**  
  Завершает игру, позволяя выполнить дополнительную очистку или логирование.

## Требования к окружению
- Python 3.9 (или выше, при условии совместимости).  
- Отсутствие внешних библиотек: алгоритм написан на чистом Python.

## Пример использования
```bash
python3 bot.py
```
---

## Блок-схема

### Общая структура


### Диаграмма алгоритма choose
![image](https://github.com/user-attachments/assets/77514b71-511a-4b0e-bcdf-4d26722242c8)

#### Диаграмма алгоритма Контрход
![image](https://github.com/user-attachments/assets/9634bee6-02b6-471a-9fbd-ab9f32866aa3)

##### Диаграмма алгоритма Опред исход
![image](https://github.com/user-attachments/assets/536aba7e-6023-4ac3-9b56-e1eaef66cba2)

#### Диаграмма алгоритма Опред. детермин.
![image](https://github.com/user-attachments/assets/b74e5931-cf30-476d-8fac-6094dbe78611)

#### Дерево решений глубиной 3
![image](https://github.com/user-attachments/assets/2b65169a-6d4f-47fd-af4f-4d6409cde70b)

